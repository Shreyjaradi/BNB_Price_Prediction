---
title: "BNB-Price-Prediction-Project"
author: "Shrey Jaradi"
date: "2022-11-23"
output: html_document
---

```{r}
library('dplyr')
library('psych')
library('tidyverse')
library('ggplot2')
library('ggmap')
library('GGally')
library(caret)
```


```{r}
bnb_df = read.csv(file='../data/AB_NYC_2019.csv') 
head(bnb_df)
```
```{r}
dim(bnb_df)
```
```{r}
summary.default(bnb_df)
```

**name :** Name of the Place 
**host_name :** It's a host name - name of owner  - not much important          
**neighbourhood_group :** This also we can convert to dummy variable -as this is also important- there are certain negihbourhood where price is varies  
**neighbourhood :** There are so many values if we create dummy variable for this, it's gonna create so much feature better to ignore this column            
**Room Type :**  we can convert to Dummy variable as there are three Room Type and it will help us as this is much relevant column 
**last_review  :** This is date column we can convert it to datetime column. 

```{r}
cat("Room Type : ", unique(bnb_df$room_type))
cat("\nNeighbourhood group : ",unique(bnb_df$neighbourhood_group))
```


There are 1052 missing values in "reviews_per_month" and "last_review" column,
as this are the column for datetime and number of reviews  last_review, 
we can replace it with NA for last_review and 0 for reviews_per_month.
```{r}
colSums(is.na(bnb_df))
```

```{r}
bnb_df['last_review'][is.na(bnb_df['last_review'])] = 'NA'
bnb_df['reviews_per_month'][is.na(bnb_df['reviews_per_month'])] = 0

```

```{r}
colSums(is.na(bnb_df))
```

 
 
Let's try to understand the statistics by Room Type , As we are trying to predict price , Let's check what are the minimum, maximum, average price according to room type and neighbourhood group

Manhattan is costliest area, their average price is almoot $250.
```{r}
options(dplyr.summarise.inform = FALSE)
bnb_df %>% group_by(room_type, neighbourhood_group) %>% dplyr::summarise(min_price = min(price), avg_price = mean(price),max_price = max(price))
```



```{r}
ggplot(bnb_df, aes(x = neighbourhood_group, y = price, fill = room_type)) +
  geom_bar(position = "dodge", stat = "identity") +
  theme_classic() +
  labs(title = "NYC Airbnb Neighbourhood vs Price", x = "Neighbourhood", y = "Price") +
  theme(plot.title = element_text(face = "bold"))
```

Top 10 Neighboorhoood in NYC 
```{r}

```



Import NYC Map and show datapoint , according to price, which are costly neighboorhood and preferrred one
```{r}

```


Need to convert the categorical data to level 
```{r}
bnb_df$neighbourhood = as.factor(bnb_df$neighbourhood)
bnb_df$neighbourhood_group = as.factor(bnb_df$neighbourhood_group)
bnb_df$room_type = as.factor(bnb_df$room_type)
bnb_df$last_review = as.POSIXct(bnb_df$last_review, format="%Y-%m-%d", tz="UTC")

```

```{r}
summary.default(bnb_df)
```

```{r}
head(bnb_df)
```

Filter the Categorical Columns, to get the correlation of matrix
```{r}
filter_cat_bnb_df = bnb_df [,c("id","host_id","neighbourhood_group","neighbourhood", "latitude", "longitude", "room_type", "price", "minimum_nights", "number_of_reviews" ,"last_review", "reviews_per_month", "calculated_host_listings_count","availability_365")] 
```


Plot the features , find the correlation 

```{r}
corr_bnb_df =  bnb_df [,c("id","neighbourhood_group", "room_type", "price", "minimum_nights", "number_of_reviews" ,"reviews_per_month", "calculated_host_listings_count","availability_365")] 
corr_bnb_df = corr_bnb_df[, sapply(corr_bnb_df, is.numeric)]
corr_bnb_df = corr_bnb_df[complete.cases(corr_bnb_df),]
```

```{r}
pairs.panels(corr_bnb_df, method = "pearson", hist.col = "#00AFBB",density = TRUE,ellipses = TRUE)
```

Machine Learning 

-Data Split
```{r}
bnb_df_index = createDataPartition(filter_cat_bnb_df$price, p =.70,list=FALSE)
bnb_df_train =  filter_cat_bnb_df[bnb_df_index,] 
bnb_df_test =   filter_cat_bnb_df[-bnb_df_index,] 

```


Excluding the Neighbourhood column and other Categorical column, We have included all the other variable and created Linear Regression model.
```{r}
bnb_model = lm(price ~ id + host_id + neighbourhood_group + latitude+  longitude + room_type+ minimum_nights + number_of_reviews +last_review+ reviews_per_month + calculated_host_listings_count + availability_365 , data=bnb_df_train)
summary(bnb_model)
```


```{r}
plot(bnb_model)
```

```{r}
bnb_model_two = lm(price ~ id + neighbourhood_group + latitude+  longitude + room_type + minimum_nights  + calculated_host_listings_count + availability_365 , data=bnb_df_train)
summary(bnb_model_two)
```




Do the hypothesis testing for relavant column 
Do the regression 
```{r}

```


 

